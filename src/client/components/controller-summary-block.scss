@use '../scss/mixins';
@import '../scss/_defs';
@import '../scss/overrides.scss';

@mixin before-label($text) {
  &::before {
    @include mixins.passive-type;

    content: $text;
    position: relative;
    width: 100%;
  }
}

:host([open]) {
  backdrop-filter: blur(10px);
  background-color: var(--white-overlay);
  right: 0px;
  z-index: 100;
}

:host {
  @include mixins.transition(background-color, right);

  background-color: transparent;
  border-left: solid 1px var(--black);
  box-sizing: border-box;
  font-size: var(--font-size--lg);
  height: 100%;
  line-height: var(--line-height);
  right: -41vw;
  overflow: hidden scroll;
  padding: calc(36px + calc(var(--spacing--top-bottom) * 2)) var(--spacing--left-right) var(--spacing--top-bottom);
  position: fixed;
  top: 0;
  width: 40vw;

  .summary {
    &--visible {
      opacity: 1 !important;
      visibility: visible !important;
    }

    &-container {
      display: flex;
      flex-flow: column;
      gap: var(--gap);
      width: 100%;
    }

    &-content {
      @include mixins.transition(opacity, visibility);

      margin-block-start: var(--spacing--top-bottom);
      margin-block-end: var(--spacing--top-bottom);
      opacity: 0;
      // overflow: hidden scroll;
      visibility: hidden;
      width: 100%;

      &__imagery {
        @include before-label('Imagery');
      }

      &__text {
        @include before-label('Summary');

        &-wordcount {
          @include mixins.passive-type;

          opacity: .8;
          text-align: end;
        }
      }

      &__topics {
        @include before-label('Topics');

        display: flex;
        flex-wrap: wrap;
        gap: 1ch;
      }

      &__topic-label {
        @include mixins.pill(var(--blue-100));

        font-size: var(--font-size--md);
        border: 1px solid var(--black);
        border-radius: 0.5em;
        text-transform: lowercase;

        &:before {
          content: '#';
          user-select: none;
        }
      }
    }

    &-empty {
      @include mixins.passive-type;

      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      line-height: 0;
      opacity: 0;
      position: fixed;
      text-align: center;
      top: 0;
      visibility: hidden;
      width: 100%;
    }
  }
}